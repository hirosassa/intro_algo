# Foundation
## 1. アルゴリズムの役割

### アルゴリズムの定義
```
入力から，出力を得るためのwell-definedな計算の手続き
```

もしくは，明確に定義された計算問題 (computational problem) を解くための道具

例: ソートの計算問題としての厳密な定義

- 入力: n個の数の列`<a1, a2, ..., an>`
- 出力: a1' <= a2' <= ... <= an' であるような入力列の置換

アルゴリズムが `正しい` とは，あらゆる入力に対して計算後に `停止し (無限ループしないで)` ，
その出力が正しいこと．

アルゴリズムで解くことのできる具体的な例

- 省略


具体例に共通する特徴

1. 解の候補は多いが，正しい解は少なく，見つけることが難しい
2. 多くの実用的な例が知られている (最短経路問題など)

### データ構造

データに対するアクセス，更新などを効率的にするために，データをストアする方法
- (どんな操作でも高速に，省メモリでできるような) 神のデータ構造はない
  - 適切な物を選ぶのが大事

### 設計と解析

計算量とか，正当性の証明など

### 効率的な計算以外の話題

効率的に解けない問題についての解析 (NP-hardなど計算量クラスについて) 
- Traveling Salesman Problem (巡回セールスマン問題) など


### アルゴリズムの自然科学的側面

アルゴリズムの効率

あるn個の数のソートのアルゴリズムがc1 x n^2時間，他のアルゴリズムがc2 x nlogn時間かかる時
c1 < c2でも，必ず計算時間が逆転するnが存在する．

- 教科書の具体例を確認

他の技術との関連

- 高速なクロック，パイプラインを持つプロセッサ
- UI
- ネットワーク
- コンパイラ

密接に関係する．アルゴリズムを知らなくてもできる仕事はある．
知っていればできる仕事はもっとある．


## 2. 本書の枠組み
### 挿入ソートの正当性の証明

ループ不変式 (Loop invariant) を用いて証明する

- 初期条件: ループ実行開始前ではループ不変式は真
- ループ内条件: ループの何回目かの繰り返し直前でループ不変式が真なら次の繰り返しも真
- 終了時条件: ループ終了後不変式の情報から正当性に関する情報が得られる

挿入ソートの具体例

- 初期条件
  - A[1..j-1]はソート済み -> OK
- ループ内条件
  - ターゲットが入る位置を、ソート済みのA[1..j-1]内部を一つずつずらしていきながら探す -> OK
- 終了時条件
  - A[1..j-1] = A[1..n] がソートされてる -> OK
  
### アルゴリズムの解析

利用している機器の差を吸収してアルゴリズムの良し悪しのみに注目する

RAM (Random Access Machine) モデル

- 単一のプロセッサ (並行計算を考えない)
  - 命令は逐次的に実行される
- 以下の命令のコストが定数時間 (入力データ数、データ長によらない)
  - 基本的な算術演算
  - データの移動
  - 制御命令
    - データ長を考慮したモデルもある (word-RAM model, wordをw bitの定数として考える)
- キャッシュなどメモリの階層は考慮しない 
  - するモデルももちろんある (external memory model/algorithms)

挿入ソートの具体例

入力がソート済み配列の時
- 内側のループが定数時間で終わるのでnのlinear function

入力が逆順ソートの時
- 内側のループが線形時間かかる (ソート済み部分全部との比較) のでnのquadratic function

### 最悪時 (worst case) と 平均時 (average case)

アルゴリズムの良さは最悪時間計算量で測ることが多い。
いくつかのアルゴリズムでは、入力の分布を考えて計算時間を見積もる平均時間計算量を考えることもある。


### アルゴリズムの設計

分割統治法 (divide and conquer)

- 分割: 問題を部分問題に分割
- 統治: 部分問題を再帰的に解く
- 結合: 部分問題の解を組み合わせる

マージソートの具体例
- 分割
  - 配列をn/2に分割する
- 統治
  - マージソートを用いて2つの分割した配列をソートする
- 結合
  - 2つのソートされた配列をマージ


ループ不変式による正当性の証明

不変式
A[p..k-1]に右半分と左半分が含む要素の全体の中で小さい方からk-p個の要素がソートされている。
また、L[i], R[j]はそれぞれの中で最小の要素である (L, Rもソートされている)。

- 初期条件
  - ループ開始前はk = pなので A[p..k-1]は空。
  - L[1], R[1]は最小
- ループ内条件
  - L[i] < R[j]のとき、L[i]は未処理の中で最小の要素。
  - A[p..k-1]はソート済みで、L[i]を入れたA[p..k]はソート済み
  - L[i] < R[j]のときも同様
- 終了時条件
  - k = r + 1の時終了。その時、A[p..r]はソート済み。
  - LとRは合わせてr-p+3個の要素があり、そのうちの2つはsentinel
  

分割統治アルゴリズムの解析

再帰的なアルゴリズムは漸化式で計算量を記述することができることが多い．
一般に，基本的な分割統治のアルゴリズムでは，

- T(n)を長さnの問題を解くのにかかる時間
- n <= c の時 (つまり分割していって数列の長さがc以下になった時) の時間はO(1)
- ルートからの分割個数をa，分割した個々の問題サイズ1/bとする (マージソートはa = b)．
  - 問題の分割にD(n)時間，部分問題の解を組み合わせるのにC(n)時間かかるとすると
    T(n) = aT(n/b) + D(n) + C(n)

これを解けば一般のnに対するT(n)を得られる

マージソートの具体例では，

- n = 1の時，T(n) = O(1)
- n > 1の時，T(n) = 2T(n/2) + O(n)

これを解く (ホワイトボード)．
